"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("vue");function t(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return n(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return n(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var a={name:"BasicForm",props:{columns:{type:Array,default:function(){return[]}},data:{type:Object,default:function(){return{}}},className:String,labelWidth:{type:[String,Number],default:"110px"},colon:Boolean,rules:Object,needSearch:Boolean},computed:{formData:{get:function(){return this.data||{}},set:function(e){this.$emit("handleEvent",e)}}},methods:{getLabelWidth:function(){return this.labelWidth.endsWith("px")?this.labelWidth:"".concat(this.labelWidth,"px")},getItemWidth:function(e){return e.labelWidth?e.labelWidth:e.label?this.labelWidth:"10px"},getColumns:function(){return this.columns},getContent:function(e){return e.format?e.format(e):this.formData[e.prop]},getPlaceholder:function(e){return e.placeholder?e.placeholder:"select"===e.type||"date"===e.type?"请选择":"请输入"},handleEvent:function(e){e.needSearch&&this.handleSearch(e)},handleSearch:function(e){"btn"!==e.type&&this.$emit("handleEvent",e)},getRules:function(e){return[].concat(t(e.rules||[]),t(e.required?[{required:e.required,message:this.getPlaceholder(e)}]:[]))}}},o=e.withScopeId("data-v-5dc64211"),r=o((function(t,n,a,r,l,i){var c=e.resolveComponent("el-input"),u=e.resolveComponent("el-input-number"),d=e.resolveComponent("el-option"),s=e.resolveComponent("el-select"),p=e.resolveComponent("el-radio"),m=e.resolveComponent("el-radio-group"),f=e.resolveComponent("el-date-picker"),h=e.resolveComponent("el-button"),y=e.resolveComponent("el-form-item"),g=e.resolveComponent("el-col"),b=e.resolveComponent("el-row"),v=e.resolveComponent("el-form");return e.openBlock(),e.createBlock(v,{ref:"form",class:a.className,model:i.formData,rules:a.rules,"label-width":i.getLabelWidth(),onSubmit:n[1]||(n[1]=e.withModifiers((function(){}),["stop","prevent"]))},{default:o((function(){return[e.createVNode(b,{type:"flex",class:"flex-wrap"},{default:o((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(i.getColumns(),(function(n){return e.openBlock(),e.createBlock(g,{key:n.prop,span:n.span||23},{default:o((function(){return[e.createVNode(y,e.mergeProps(n,{label:a.colon&&n.label?"".concat(n.label,"："):n.label,rules:i.getRules(n),"label-width":i.getItemWidth(n),class:n.className}),{default:o((function(){return[e.createCommentVNode(" solt "),"slot"===n.type?e.renderSlot(t.$slots,n.prop,{key:0}):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 文本 "),"text"===n.type?(e.openBlock(),e.createBlock("span",{key:1,style:n.style},e.toDisplayString(i.getContent(n)),5)):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 普通输入框 "),"input"===n.type?(e.openBlock(),e.createBlock(c,e.mergeProps({key:2,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},modelModifiers:{trim:!0},type:n.inputType||"text",disabled:n.disabled,placeholder:i.getPlaceholder(n),onChange:function(e){return i.handleEvent(n)}},e.toHandlers(n.on)),null,16,["modelValue","onUpdate:modelValue","type","disabled","placeholder","onChange"])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 文本输入框 "),"textarea"===n.type?(e.openBlock(),e.createBlock(c,e.mergeProps({key:3,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},modelModifiers:{trim:!0},type:n.type,disabled:n.disabled,placeholder:i.getPlaceholder(n),autosize:{minRows:2,maxRows:10},onChange:function(e){return i.handleEvent(n)}},e.toHandlers(n.on)),null,16,["modelValue","onUpdate:modelValue","type","disabled","placeholder","onChange"])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 计数器 "),"inputNumber"===n.type?(e.openBlock(),e.createBlock(u,e.mergeProps({key:4,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},modelModifiers:{trim:!0},size:"small",min:n.min,max:n.max,onChange:function(e){return i.handleEvent(n)}},e.toHandlers(n.on)),null,16,["modelValue","onUpdate:modelValue","min","max","onChange"])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 选择框 "),"select"===n.type?(e.openBlock(),e.createBlock(s,e.mergeProps({key:5,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},modelModifiers:{trim:!0},disabled:n.disabled,clearable:n.clearable||!0,filterable:n.filterable||!1,multiple:n.multiple||!1,placeholder:i.getPlaceholder(n),style:{width:"100%"},onChange:function(e){return i.handleEvent(n)}},e.toHandlers(n.on)),{default:o((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.list,(function(t){return e.openBlock(),e.createBlock(d,{key:t[n.key||n.valueKey||"val"],label:t[n.labelKey||"label"],value:t[n.valueKey||"val"]},null,8,["label","value"])})),128))]})),_:2},1040,["modelValue","onUpdate:modelValue","disabled","clearable","filterable","multiple","placeholder","onChange"])):e.createCommentVNode("v-if",!0),"radio"===n.type?(e.openBlock(),e.createBlock(m,{key:6,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},onChange:function(e){return i.handleEvent(n)}},{default:o((function(){return[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(n.list,(function(t){return e.openBlock(),e.createBlock(p,{key:t.label,label:t.val},{default:o((function(){return[e.createTextVNode(e.toDisplayString(t.label),1)]})),_:2},1032,["label"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):e.createCommentVNode("v-if",!0),e.createCommentVNode(" 日期选择框 "),"date"===n.type?(e.openBlock(),e.createBlock(f,e.mergeProps({key:7,modelValue:i.formData[n.prop],"onUpdate:modelValue":function(e){return i.formData[n.prop]=e},"range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",type:n.dateType,"picker-options":n.timePickerOptions,clearable:n.clearable||!0,disabled:n.disabled,"value-format":n.valueFormat||"yyyy-MM-dd HH:mm:ss",placeholder:i.getPlaceholder(n),style:{width:"100%"},onChange:function(e){return i.handleEvent(n)},onClear:function(e){return i.handleEvent(n)}},e.toHandlers(n.on)),null,16,["modelValue","onUpdate:modelValue","type","picker-options","clearable","disabled","value-format","placeholder","onChange","onClear"])):e.createCommentVNode("v-if",!0),"search"===n.type||"btn"===n.type?(e.openBlock(),e.createBlock(h,e.mergeProps({key:8,type:n.btnType||"primary",onClick:function(e){return i.handleSearch(n)}},e.toHandlers(n.on)),{default:o((function(){return[e.createTextVNode(e.toDisplayString(n.text||"搜索"),1)]})),_:2},1040,["type","onClick"])):e.createCommentVNode("v-if",!0)]})),_:2},1040,["label","rules","label-width","class"])]})),_:2},1032,["span"])})),128))]})),_:1})]})),_:1},8,["class","model","rules","label-width"])}));a.render=r,a.__scopeId="data-v-5dc64211",a.__file="form/form.vue",a.install=function(e){e.component(a.name,a)};var l={name:"Paging",props:{current:{type:Number,default:1},size:{type:Number,default:10},total:{type:Number,default:0},layout:{type:String,default:function(){return"total, sizes, prev, pager, next"}}},computed:{currentPage:{get:function(){return this.current},set:function(e){this.$emit("update:current",e)}},pageSize:{get:function(){return this.size},set:function(e){this.$emit("update:size",e)}}},methods:{handleSearch:function(e){"size"===e&&this.$emit("update:current",1),this.$emit("handleSearch")}}};l.render=function(t,n,a,o,r,l){var i=e.resolveComponent("el-pagination");return e.openBlock(),e.createBlock(i,{layout:"total, sizes, prev, pager, next, jumper","current-page":l.currentPage,"page-sizes":[10,20,40,60,80],"page-size":l.pageSize,total:a.total,size:"small",onSizeChange:n[1]||(n[1]=function(e){return l.handleSearch("size")}),onCurrentChange:n[2]||(n[2]=function(e){return l.handleSearch("page")})},null,8,["current-page","page-size","total"])},l.__file="page/page.vue";var i={components:{basicPage:l},name:"BasicTable",props:{type:String,columns:{type:Array,default:function(){return[]}},selectedData:Array,selectedDataKey:{type:String,default:"id"},data:{type:Array,default:function(){return[]}},size:{type:String,default:"small"},pageParams:{type:Object,default:function(){return{current:Number,size:Number,total:Number,layout:String}}},showPage:{type:Boolean,default:!0},tableLoading:Boolean},computed:{currentRowId:{get:function(){return this.selectedData.length?this.selectedData[0]:""},set:function(e){this.$emit("update:selectedData",[e])}}},watch:{data:{deep:!0,immediate:!0,handler:function(){"checkbox"===this.type&&(this.lastMultipleSelectionKey=[],this.triggerSelected())}}},data:function(){return{lastMultipleSelectionKey:[]}},methods:{triggerSelected:function(){var e=this;this.$nextTick((function(){e.data.forEach((function(t){e.$refs.basicTable.toggleRowSelection(t,e.selectedData.includes(t[e.selectedDataKey]))}))}))},handleSelect:function(e,t){var n=this,a=e.map((function(e){return e[n.selectedDataKey]})),o=this.selectedData;o="push"===this.compare(this.lastMultipleSelectionKey,a)?o.concat(t[this.selectedDataKey]):o.filter((function(e){return e!==t[n.selectedDataKey]})),this.$emit("update:selectedData",o),this.$emit("handleSelect",o),this.lastMultipleSelectionKey=a},handleSelectAll:function(e){var n=this,a=this.selectedData,o=e.map((function(e){return e[n.selectedDataKey]}));if(o.length)a=t(new Set(a.concat(o)));else{var r=this.data.map((function(e){return e[n.selectedDataKey]}));a=a.filter((function(e){return!r.includes(e)}))}this.$emit("update:selectedData",a)},compare:function(e,t){return e.length<t.length?"push":"cancel"},changeRadio:function(e,t){this.$emit("update:selectedData",[t[this.selectedDataKey]])},getArrDifference:function(e,t){return e.concat(t).filter((function(e,t,n){return n.indexOf(e)===n.lastIndexOf(e)}))[0]},format:function(e,t){var n=e.row,a=e.item,o=e.$index;return t?t({row:n,item:a,index:o}):n[a.prop]},getColumnWidth:function(e){return"string"==typeof e.width?e.width:"number"==typeof e.width?String(e.width):"auto"},handleSearch:function(){this.$emit("handleSearch")}}},c=e.withScopeId("data-v-982890a2");e.pushScopeId("data-v-982890a2");var u={class:"table-wrapper"},d={"slot-scope":"scope"},s={class:"page-wrapper"};e.popScopeId();var p=c((function(t,n,a,o,r,l){var i=e.resolveComponent("el-table-column"),p=e.resolveComponent("el-radio"),m=e.resolveComponent("el-image"),f=e.resolveComponent("el-table"),h=e.resolveComponent("basicPage"),y=e.resolveDirective("loading");return e.openBlock(),e.createBlock("div",u,[e.withDirectives(e.createVNode(f,e.mergeProps({ref:"basicTable"},t.$attrs,e.toHandlers(t.$listeners),{style:{width:"100%"},data:a.data,size:a.size,onSelect:l.handleSelect,onSelectAll:l.handleSelectAll}),{default:c((function(){return["checkbox"===a.type?(e.openBlock(),e.createBlock(i,{key:0,type:"selection",width:"40",fixed:"left"})):e.createCommentVNode("v-if",!0),"radio"===a.type?(e.openBlock(),e.createBlock(i,{key:1,label:"单选",align:"center",width:"50",fixed:"left"},{default:c((function(){return[e.createVNode("template",d,[e.createVNode(p,{modelValue:l.currentRowId,"onUpdate:modelValue":n[1]||(n[1]=function(e){return l.currentRowId=e}),label:t.scope.row[a.selectedDataKey]},null,8,["modelValue","label"])])]})),_:1})):e.createCommentVNode("v-if",!0),e.createVNode("template",null,[(e.openBlock(!0),e.createBlock(e.Fragment,null,e.renderList(a.columns,(function(n){return e.openBlock(),e.createBlock(i,e.mergeProps(n,{key:n.prop,width:l.getColumnWidth(n)}),{default:c((function(a){var o=a.row,r=a.column,i=a.$index;return[e.renderSlot(t.$slots,n.prop,{row:o,column:r},(function(){return["img"===n.type?(e.openBlock(),e.createBlock(m,e.mergeProps({key:0,style:n.style||"",src:l.format({row:o,item:n},n.format),"preview-src-list":n.preview?[l.format({row:o,item:n},n.format)]:[]},n.imgProps),null,16,["style","src","preview-src-list"])):(e.openBlock(),e.createBlock("div",{key:1,style:n.style},e.toDisplayString(l.format({row:o,item:n,$index:i},n.format)),5))]}))]})),_:2},1040,["width"])})),128))])]})),_:1},16,["data","size","onSelect","onSelectAll"]),[[y,a.tableLoading]]),e.createVNode("div",s,[a.showPage&&a.pageParams.total>a.pageParams.size?(e.openBlock(),e.createBlock(h,{key:0,current:a.pageParams.current,total:a.pageParams.total,size:a.pageParams.size,layout:a.pageParams.layout,onHandleSearch:l.handleSearch},null,8,["current","total","size","layout","onHandleSearch"])):e.createCommentVNode("v-if",!0)])])}));i.render=p,i.__scopeId="data-v-982890a2",i.__file="table/table.vue",i.install=function(e){e.component(i.name,i)},exports.basicForm=a,exports.basicTable=i;
